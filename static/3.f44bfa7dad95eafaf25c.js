(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{55:function(e,n,t){"use strict";t.r(n);var r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("h1",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Meetings konfigurieren")]),e._v(" "),t("MessageList",{attrs:{messages:e.message?[e.message]:[]}}),e._v(" "),e.changes_made?t("MessageBox",{attrs:{type:"warning"}},[t("translate",[e._v("\n            Ihre Änderungen sind noch nicht gespeichert!\n        ")])],1):e._e(),e._v(" "),e.drivers?t("form",{staticClass:"default",on:{submit:function(e){e.preventDefault()}}},[t("fieldset",[t("legend",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("\n                Allgemeine Konfiguration\n            ")]),e._v(" "),t("label",[t("translate",[e._v("Feedback Support-Adresse")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.general_config.feedback_contact_address,expression:"general_config['feedback_contact_address']",modifiers:{trim:!0}}],attrs:{type:"text"},domProps:{value:e.general_config.feedback_contact_address},on:{input:function(n){n.target.composing||e.$set(e.general_config,"feedback_contact_address",n.target.value.trim())},blur:function(n){return e.$forceUpdate()}}})],1)]),e._v(" "),e._l(e.drivers,(function(n,r){return t("fieldset",{key:r},[t("legend",[e._v("\n                "+e._s(n.title)+"\n            ")]),e._v(" "),Object.keys(e.config[r]).includes("enable")?t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.config[r].enable,expression:"config[driver_name]['enable']"}],attrs:{type:"checkbox","true-value":"1","false-value":"0"},domProps:{checked:Array.isArray(e.config[r].enable)?e._i(e.config[r].enable,null)>-1:e._q(e.config[r].enable,"1")},on:{change:function(n){var t=e.config[r].enable,a=n.target,s=a.checked?"1":"0";if(Array.isArray(t)){var i=e._i(t,null);a.checked?i<0&&e.$set(e.config[r],"enable",t.concat([null])):i>-1&&e.$set(e.config[r],"enable",t.slice(0,i).concat(t.slice(i+1)))}else e.$set(e.config[r],"enable",s)}}}),e._v(" "),t("translate",[e._v("Verwenden dieses Treibers zulassen")])],1):e._e(),e._v(" "),Object.keys(e.config[r]).includes("display_name")?t("label",[t("translate",[e._v("Anzeigename")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.config[r].display_name,expression:"config[driver_name]['display_name']",modifiers:{trim:!0}}],attrs:{type:"text"},domProps:{value:e.config[r].display_name},on:{input:function(n){n.target.composing||e.$set(e.config[r],"display_name",n.target.value.trim())},blur:function(n){return e.$forceUpdate()}}})],1):e._e(),e._v(" "),Object.keys(n).includes("recording")?t("div",e._l(n.recording,(function(n,a){return t("label",{key:a},["boolean"==typeof n.value?t("input",{directives:[{name:"model",rawName:"v-model",value:e.config[r][n.name],expression:"config[driver_name][rval['name']]"}],attrs:{type:"checkbox","true-value":"1","false-value":"0"},domProps:{checked:Array.isArray(e.config[r][n.name])?e._i(e.config[r][n.name],null)>-1:e._q(e.config[r][n.name],"1")},on:{click:function(t){return e.handleRecordings(r,n.name)},change:function(t){var a=e.config[r][n.name],s=t.target,i=s.checked?"1":"0";if(Array.isArray(a)){var c=e._i(a,null);s.checked?c<0&&e.$set(e.config[r],n.name,a.concat([null])):c>-1&&e.$set(e.config[r],n.name,a.slice(0,c).concat(a.slice(c+1)))}else e.$set(e.config[r],n.name,i)}}}):e._e(),e._v(" "),t("span",[e._v("\n                        "+e._s(n.display_name)+"\n                    ")]),e._v(" "),Object.keys(n).includes("info")?t("StudipTooltipIcon",{attrs:{text:n.info}}):e._e()],1)})),0):e._e(),e._v(" "),Object.keys(n).includes("preupload")?t("div",e._l(n.preupload,(function(n,a){return t("label",{key:a},["boolean"==typeof n.value?t("input",{directives:[{name:"model",rawName:"v-model",value:e.config[r][n.name],expression:"config[driver_name][rval['name']]"}],attrs:{type:"checkbox","true-value":"1","false-value":"0"},domProps:{checked:Array.isArray(e.config[r][n.name])?e._i(e.config[r][n.name],null)>-1:e._q(e.config[r][n.name],"1")},on:{change:function(t){var a=e.config[r][n.name],s=t.target,i=s.checked?"1":"0";if(Array.isArray(a)){var c=e._i(a,null);s.checked?c<0&&e.$set(e.config[r],n.name,a.concat([null])):c>-1&&e.$set(e.config[r],n.name,a.slice(0,c).concat(a.slice(c+1)))}else e.$set(e.config[r],n.name,i)}}}):e._e(),e._v(" "),t("span",{class:{disabled:"preupload"!=n.name&&"1"!=e.config[r].preupload}},[e._v("\n                        "+e._s(n.display_name)+"\n                    ")]),e._v(" "),Object.keys(n).includes("info")?t("StudipTooltipIcon",{attrs:{text:n.info}}):e._e()],1)})),0):e._e(),e._v(" "),Object.keys(e.config[r]).includes("welcome")?t("label",[t("translate",[e._v("Willkommensnachricht")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.config[r].welcome,expression:"config[driver_name]['welcome']"}],attrs:{cols:"30",rows:"5"},domProps:{value:e.config[r].welcome},on:{input:function(n){n.target.composing||e.$set(e.config[r],"welcome",n.target.value)}}})],1):e._e(),e._v(" "),e.config[r].servers&&Object.keys(e.config[r].servers).length&&e.server_object[r]?t("div",[t("h3",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("\n                    Folgende Server werden verwendet\n                ")]),e._v(" "),t("table",{staticClass:"default collapsable tablesorter conference-meetings"},[t("thead",[t("tr",[t("th",[e._v("#")]),e._v(" "),e._l(n.config,(function(n,r){return["roomsize-presets"!=n.name&&"description"!=n.name?t("th",{key:r,class:{td_center:"active"==n.name},attrs:{title:n.display_name}},[e._v("\n                                     "+e._s(n.display_name)+"\n                                ")]):e._e()]})),e._v(" "),t("th",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Aktionen")])],2)]),e._v(" "),t("tbody",e._l(e.config[r].servers,(function(a,s){return t("tr",{key:s,class:{"active nohover":e.server_object[r].index==s}},[t("td",[e._v(e._s(s+1))]),e._v(" "),e._l(n.config,(function(n,s){return[n.name&&"roomsize-presets"!=n.name&&"description"!=n.name?t("td",{key:s,class:{td_center:"active"==n.name},attrs:{title:"active"!=n.name&&"course_types"!=n.name?a[n.name]:""}},["maxParticipants"!=n.name||a[n.name]&&0!=parseInt(a[n.name])?"course_types"==n.name?[e._v("\n                                        "+e._s(e.getCourseTypeName(a[n.name],r))+"\n                                    ")]:"active"==n.name?[t("StudipIcon",{attrs:{icon:a[n.name]?"checkbox-checked":"checkbox-unchecked",role:"clickable",size:"14"}})]:[e._v("\n                                        "+e._s(a[n.name])+"\n                                    ")]:[e._v("\n                                        Ohne Grenze\n                                    ")]],2):e._e()]})),e._v(" "),t("td",[t("a",{staticStyle:{cursor:"pointer"},on:{click:function(n){return n.preventDefault(),e.prepareEditServer(r,s)}}},[t("StudipIcon",{attrs:{icon:"edit",role:"clickable"}})],1),e._v(" "),t("a",{staticStyle:{cursor:"pointer"},on:{click:function(n){return n.preventDefault(),e.deleteServer(r,s)}}},[t("StudipIcon",{attrs:{icon:"trash",role:"clickable"}})],1)])],2)})),0)])]):e._e(),e._v(" "),t("StudipButton",{attrs:{icon:"add"},on:{click:function(n){return e.addServerDialog(r)}}},[t("translate",[e._v("Server hinzufügen")])],1),e._v(" "),e.server_object[r]?t("ServerDialog",{attrs:{DialogVisible:e.serverDialogVisible==r,server_object:e.server_object,driver_name:r,driver:n},on:{close:function(n){e.serverDialogVisible=!1},edit:e.addEditServers}}):e._e()],1)})),e._v(" "),t("MessageList",{attrs:{messages:e.message?[e.message]:[]}}),e._v(" "),e.changes_made?t("MessageBox",{attrs:{type:"warning"}},[t("translate",[e._v("\n                Ihre Änderungen sind noch nicht gespeichert!\n            ")])],1):e._e(),e._v(" "),t("footer",[t("StudipButton",{class:{disabled:!e.changes_made},attrs:{icon:"accept"},on:{click:e.storeConfig}},[t("translate",[e._v("Einstellungen speichern")])],1)],1)],2):e._e()],1)};r._withStripped=!0;var a=t(6),s=t(7),i=t(49),c=t(50),o=t(51),l=t(48),v=function(){var e=this,n=e.$createElement,t=e._self._c||n;return e.messages.length?t("div",e._l(e.messages,(function(n,r){return t("MessageBox",{attrs:{type:n.type},on:{hide:function(n){e.messages[r]=""}}},["string"==typeof n.text?t("span",[e._v(e._s(n.text))]):t("ul",e._l(n.text,(function(n,r){return t("li",{key:r},[e._v("\n                "+e._s(n)+"\n            ")])})),0)])})),1):e._e()};v._withStripped=!0;var d={name:"MessageList",components:{MessageBox:l.a},props:{messages:{type:Array}}},g=t(5),_=Object(g.a)(d,v,[],!1,null,null,null);_.options.__file="vueapp/components/MessageList.vue";var m=_.exports,u=t(53),f=t(0),p=t(1),h={name:"Admin",components:{StudipButton:i.a,StudipTooltipIcon:c.a,MessageBox:l.a,MessageList:m,StudipIcon:o.a,ServerDialog:u.a},data:()=>({message:null,server_object:{},serverDialogVisible:!1,changes_made:!1}),computed:{...Object(a.b)(["config","drivers","general_config"])},methods:{storeConfig(){this.$store.dispatch(f.b,{config:this.config,general_config:this.general_config}).then(({data:e})=>{this.message=e.message,this.$store.commit(p.b,e.config),"error"==e.message.type&&this.$store.dispatch(f.d).then(()=>{this.changes_made=!1,this.createServerObject()}),this.changes_made=!1})},deleteServer(e,n){this.$delete(this.config[e].servers,n)},clearServer(e){for(var n in this.server_object[e])this.server_object[e][n]="index"!=n?"":-1,this.$set(this.server_object[e],"active",!0)},addServerDialog(e){this.clearServer(e),this.serverDialogVisible=e},addEditServers(e){let n=e.driver_name,t=e.server;this.config[n].servers||this.$set(this.config[n],"servers",[]);var r=0;r=-1==t[n].index?Object.keys(this.config[n].servers).length:t[n].index,t[n].index=-1;var a=new Object;for(var s in t[n])"index"!=s&&(a[s]=t[n][s],t[n][s]="");this.$set(this.config[n].servers,r,a),this.serverDialogVisible=!1},prepareEditServer(e,n){var t=this.config[e].servers[n];for(var r in t)this.server_object[e][r]=t[r];this.server_object[e].index=n,this.serverDialogVisible=e},createServerObject(){for(var e in this.drivers){var n=new Object;n.index=-1,this.$set(this.server_object,e,n)}},handleRecordings(e,n){setTimeout(()=>{if(this.config[e][n]&&"1"==this.config[e][n]&&this.drivers[e]&&this.drivers[e].recording&&Array.isArray(this.drivers[e].recording)){var t=this.drivers[e].recording.map(e=>e.name);for(var r of t)r!=n&&this.config[e][r]&&this.$set(this.config[e],r,"0")}},100)},getCourseTypeName(e,n){if(!e)return"Alle";var t=(e+="").split("_")[0],r=this.drivers[n].config.find(e=>"course_types"==e.name);return r.value&&r.value[t].subs&&r.value[t].subs[e]?r.value[t].subs[e]:"Unbekannt"}},watch:{config:{handler:function(){this.changes_made=!0},deep:!0},general_config:{handler:function(){this.changes_made=!0},deep:!0}},mounted(){s.a.dispatch(f.d).then(()=>{this.changes_made=!1,this.createServerObject()})}},b=Object(g.a)(h,r,[],!1,null,null,null);b.options.__file="vueapp/views/Admin.vue";n.default=b.exports}}]);